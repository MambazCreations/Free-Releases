Loan Sharking Script for FiveM
ğŸ“Œ Description
This is a Loan Sharking script for FiveM that allows players to take loans from a Loan Shark NPC, repay loans with interest, and face consequences if loans are not repaid on time. The script includes configurable settings for interest rates, loan limits, repayment times, and NPC behavior for missed payments.

This script uses:

ox_lib â€“ for UI and notifications
ox_target â€“ for interaction with the Loan Shark NPC
qb-core â€“ for handling player data and money
oxmysql â€“ for managing loan data in the database

ğŸ› ï¸ Features
âœ… Take loans with configurable limits and interest rates
âœ… Repay loans with interest before the deadline
âœ… NPC attackers hunt down the player if the loan isnâ€™t repaid on time
âœ… Configurable NPC behavior, including health, accuracy, and weapons
âœ… Loan Shark NPC spawns at a random location every server restart
âœ… Operating hours for the Loan Shark can be customized
âœ… Fully synced with database â€“ loan data persists across restarts
âœ… Blip option to show the Loan Shark location on the map

âš™ï¸ Installation
Download the script and place it in the resources folder of your FiveM server.
Add ensure loanshark to your server.cfg

Import SQL into your database:

CREATE TABLE IF NOT EXISTS `loans` (
  `citizenid` VARCHAR(50) NOT NULL,
  `amount` INT NOT NULL,
  `deadline` BIGINT NOT NULL,
  PRIMARY KEY (`citizenid`)
);

Dependencies â€“ Ensure these resources are installed and running:
ox_lib
ox_target
qb-core
oxmysql

ğŸ“ Configuration
Open config.lua to adjust the script to your needs:

Interest Rate & Loan Limits
InterestRate â€“ Interest rate applied to loans
MaxLoanAmount â€“ Maximum amount a player can borrow

Config.InterestRate = 0.1 -- 10% interest
Config.MaxLoanAmount = 100000
Loan Shark NPC Settings
PedModel â€“ NPC model for the Loan Shark
Locations â€“ Random spawn locations for the Loan Shark NPC
ShowBlip â€“ Whether to display the NPC location on the map

Config.PedModel = 's_m_y_dealer_01'
Config.Locations = {
    {x = 119.30, y = -1947.20, z = 20.00, h = 180.0},
    {x = 372.34, y = -1034.14, z = 29.34, h = 270.0}
}
Config.ShowBlip = true
Operating Hours
Start/Finish â€“ Define when the Loan Shark is available

Config.OpenHours = {
    start = 20, -- 8:00 PM
    finish = 6   -- 6:00 AM
}
NPC Behavior for Missed Payments
NPCWeapons â€“ Weapons NPCs will use
NPCDifficulty â€“ Adjust health, accuracy, and armor
NPCCount â€“ Number of NPCs that will hunt the player

Config.NPCWeapons = {"WEAPON_PISTOL", "WEAPON_SMG"}
Config.NPCDifficulty = {
    health = 200,
    accuracy = 75,
    armor = 50
}
Config.NPCCount = 3
Repayment Time
RepaymentTime â€“ Time to repay loan (in minutes)

Config.RepaymentTime = 1
ğŸš€ How to Use
ğŸ¦ Taking a Loan
Approach the Loan Shark NPC.
Use the interaction key to open the loan menu.
Choose the loan amount (up to the configured max).
Loan amount will be deposited into your cash.
ğŸ’° Repaying a Loan
Approach the Loan Shark NPC.
Use the interaction key to open the repayment menu.
If you have enough cash, you can repay the loan + interest.
ğŸš¨ Consequences for Missing Payment
If the repayment deadline passes:
NPCs will spawn and attack the player.
NPCs will have configurable health, accuracy, and weapons.
NPCs will stop once the player dies or the loan is repaid.

ğŸ”¥ Commands
Command	Description
/startloanshark	Force the Loan Shark to spawn
/stoploanshark	Remove the Loan Shark NPC
/resetloan	Reset all active loans (Admin only)

ğŸš¨ Troubleshooting
âœ… NPC Not Spawning
Ensure the PedModel is valid.
Check that the location is accessible.
Ensure operating hours are set correctly.
âœ… Loan Repayment Not Working
Ensure the player has enough cash.
Check for errors in the server console.
âœ… NPCs Not Attacking
Ensure weapons are valid.
Check NPC health and accuracy settings.
ğŸ“¢ Future Updates
âœ… More NPC variation
âœ… Configurable repayment methods (bank vs. cash)
âœ… Additional consequences for missed payments
ğŸ’– Credits
Script Author â€“ YourName
Framework â€“ QBCore
Dependencies â€“ ox_lib, ox_target, oxmysql